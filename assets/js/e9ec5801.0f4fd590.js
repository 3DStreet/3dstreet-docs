"use strict";(self.webpackChunk_3dstreet_docs=self.webpackChunk_3dstreet_docs||[]).push([[4587],{28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>l});var s=t(96540);const r={},d=s.createContext(r);function i(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),s.createElement(d.Provider,{value:n},e.children)}},33794:(e,n,t)=>{t.d(n,{A:()=>s});const s=t.p+"assets/images/street-segment-ui-sidebar-6c58c4067792fa71dceffa1722571e64.png"},76965:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"managed-street/component-street-segment","title":"street-segment Component","description":"The street-segment component creates and manages individual street segments in a 3D environment. Each segment represents a distinct part of the street (e.g., drive lanes, bike lanes, sidewalks) with specific properties and behaviors.","source":"@site/docs/managed-street/component-street-segment.md","sourceDirName":"managed-street","slug":"/managed-street/component-street-segment","permalink":"/docs/managed-street/component-street-segment","draft":false,"unlisted":false,"editUrl":"https://github.com/3dstreet/3dstreet-docs/tree/main/docs/managed-street/component-street-segment.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"managed-street Component","permalink":"/docs/managed-street/component-managed-street"},"next":{"title":"Managed Street JSON Format","permalink":"/docs/managed-street/managed-street-json-format"}}');var r=t(74848),d=t(28453);const i={sidebar_position:3},l="street-segment Component",a={},c=[{value:"User Interface",id:"user-interface",level:2},{value:"Properties",id:"properties",level:2},{value:"Segment Types",id:"segment-types",level:2},{value:"Drive Lane",id:"drive-lane",level:3},{value:"Bus Lane",id:"bus-lane",level:3},{value:"Bike Lane",id:"bike-lane",level:3},{value:"Events",id:"events",level:2},{value:"Generated Components",id:"generated-components",level:2},{value:"Surface Types and Textures",id:"surface-types-and-textures",level:2},{value:"Usage",id:"usage",level:2},{value:"Component Lifecycle",id:"component-lifecycle",level:2},{value:"Methods",id:"methods",level:2},{value:"calculateHeight(elevationLevel)",id:"calculateheightelevationlevel",level:3},{value:"generateMesh(data)",id:"generatemeshdata",level:3},{value:"calculateTextureRepeat(length, width, textureSourceId)",id:"calculatetexturerepeatlength-width-texturesourceid",level:3},{value:"Notes",id:"notes",level:2},{value:"Known Limitations",id:"known-limitations",level:2}];function o(e){const n={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,d.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsxs)(n.h1,{id:"street-segment-component",children:[(0,r.jsx)(n.code,{children:"street-segment"})," Component"]})}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.code,{children:"street-segment"})," component creates and manages individual street segments in a 3D environment. Each segment represents a distinct part of the street (e.g., drive lanes, bike lanes, sidewalks) with specific properties and behaviors."]}),"\n",(0,r.jsx)(n.h2,{id:"user-interface",children:"User Interface"}),"\n",(0,r.jsxs)(n.p,{children:["A custom sidebar in 3DStreet Editor allows users to edit a subset of ",(0,r.jsx)(n.code,{children:"street-segment"})," properties and associated generated components."]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{alt:"Street Segment Sidebar",src:t(33794).A+"",width:"372",height:"583"})}),"\n",(0,r.jsx)(n.h2,{id:"properties",children:"Properties"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Property"}),(0,r.jsx)(n.th,{children:"Type"}),(0,r.jsx)(n.th,{children:"Default"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"type"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Type of street segment. Must be one of: 'drive-lane', 'bus-lane', 'bike-lane', 'sidewalk', 'parking-lane', 'divider', 'grass', 'rail'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"width"}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Width of the segment in meters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"length"}),(0,r.jsx)(n.td,{children:"number"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Length of the segment in meters"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"level"}),(0,r.jsx)(n.td,{children:"int"}),(0,r.jsx)(n.td,{children:"0"}),(0,r.jsx)(n.td,{children:"Vertical level of the segment (-1 to 2)"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"direction"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Direction of traffic flow: 'none', 'inbound', or 'outbound'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"surface"}),(0,r.jsx)(n.td,{children:"string"}),(0,r.jsx)(n.td,{children:"'asphalt'"}),(0,r.jsx)(n.td,{children:"Surface material type. One of: 'asphalt', 'concrete', 'grass', 'sidewalk', 'gravel', 'sand', 'none', 'solid'"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"color"}),(0,r.jsx)(n.td,{children:"color"}),(0,r.jsx)(n.td,{children:"-"}),(0,r.jsx)(n.td,{children:"Color of the segment surface"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"segment-types",children:"Segment Types"}),"\n",(0,r.jsx)(n.p,{children:"The component includes several predefined segment types with specific configurations. These are intended to be used as a starting point for creating custom segment types."}),"\n",(0,r.jsx)(n.h3,{id:"drive-lane",children:"Drive Lane"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  type: 'drive-lane',\n  color: white,\n  surface: 'asphalt',\n  level: 0,\n  generated: {\n    clones: [{\n      mode: 'random',\n      modelsArray: 'sedan-rig, box-truck-rig, self-driving-waymo-car, suv-rig, motorbike',\n      spacing: 7.3,\n      count: 4\n    }]\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bus-lane",children:"Bus Lane"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  type: 'bus-lane',\n  surface: 'asphalt',\n  color: red,\n  level: 0,\n  generated: {\n    clones: [{ mode: 'random', modelsArray: 'bus', spacing: 15, count: 1 }],\n    stencil: [{ modelsArray: 'word-only, word-taxi, word-bus', spacing: 40, padding: 10 }]\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h3,{id:"bike-lane",children:"Bike Lane"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-javascript",children:"{\n  type: 'bike-lane',\n  color: green,\n  surface: 'asphalt',\n  level: 0,\n  generated: {\n    stencil: [{ modelsArray: 'bike-arrow', cycleOffset: 0.3, spacing: 20 }],\n    clones: [{\n      mode: 'random',\n      modelsArray: 'cyclist-cargo, cyclist1, cyclist2, cyclist3, cyclist-dutch, cyclist-kid, ElectricScooter_1',\n      spacing: 2.03,\n      count: 4\n    }]\n  }\n}\n"})}),"\n",(0,r.jsx)(n.h2,{id:"events",children:"Events"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Event Name"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"Event Detail"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"segment-width-changed"}),(0,r.jsx)(n.td,{children:"Fired when segment width is modified"}),(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"{oldWidth, newWidth}"})})]})})]}),"\n",(0,r.jsx)(n.h2,{id:"generated-components",children:"Generated Components"}),"\n",(0,r.jsx)(n.p,{children:"The component can automatically generate and manage several sub-components based on the segment type:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Clones"}),": Generates repeated 3D models (vehicles, cyclists, etc.)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Stencils"}),": Adds road markings and symbols"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Pedestrians"}),": Adds pedestrian models with configurable density"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Striping"}),": Adds road stripes and markings"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"surface-types-and-textures",children:"Surface Types and Textures"}),"\n",(0,r.jsx)(n.p,{children:"The component supports various surface types with corresponding textures:"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Surface Type"}),(0,r.jsx)(n.th,{children:"Texture ID"}),(0,r.jsx)(n.th,{children:"Description"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"asphalt"}),(0,r.jsx)(n.td,{children:"seamless-road"}),(0,r.jsx)(n.td,{children:"Standard road surface"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"concrete"}),(0,r.jsx)(n.td,{children:"seamless-bright-road"}),(0,r.jsx)(n.td,{children:"Bright concrete surface"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"grass"}),(0,r.jsx)(n.td,{children:"grass-texture"}),(0,r.jsx)(n.td,{children:"Grass surface"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sidewalk"}),(0,r.jsx)(n.td,{children:"seamless-sidewalk"}),(0,r.jsx)(n.td,{children:"Sidewalk texture"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"gravel"}),(0,r.jsx)(n.td,{children:"compacted-gravel-texture"}),(0,r.jsx)(n.td,{children:"Gravel surface"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"sand"}),(0,r.jsx)(n.td,{children:"sandy-asphalt-texture"}),(0,r.jsx)(n.td,{children:"Sandy surface"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"hatched"}),(0,r.jsx)(n.td,{children:"hatched-base"}),(0,r.jsx)(n.td,{children:"Hatched marking pattern"})]})]})]}),"\n",(0,r.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,r.jsx)(n.p,{children:"Basic usage example:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<a-entity street-segment="\n  type: drive-lane;\n  surface: asphalt;\n  color: white;\n  width: 3;\n  length: 150">\n</a-entity>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"component-lifecycle",children:"Component Lifecycle"}),"\n",(0,r.jsx)(n.p,{children:"The component manages several key operations during its lifecycle:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Initialization"}),": Sets up default height and generated components list"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Update"}),": Handles property changes and updates meshes accordingly"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Remove"}),": Cleans up generated components and meshes"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"methods",children:"Methods"}),"\n",(0,r.jsx)(n.h3,{id:"calculateheightelevationlevel",children:"calculateHeight(elevationLevel)"}),"\n",(0,r.jsx)(n.p,{children:"Converts elevation levels (-1 to 2) to Three.js meter units."}),"\n",(0,r.jsx)(n.h3,{id:"generatemeshdata",children:"generateMesh(data)"}),"\n",(0,r.jsx)(n.p,{children:"Creates the segment's 3D geometry and materials."}),"\n",(0,r.jsx)(n.h3,{id:"calculatetexturerepeatlength-width-texturesourceid",children:"calculateTextureRepeat(length, width, textureSourceId)"}),"\n",(0,r.jsx)(n.p,{children:"Calculates texture repeat and offset values based on segment dimensions."}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"The component automatically handles elevation changes based on the level property"}),"\n",(0,r.jsx)(n.li,{children:"Texture repeats are calculated automatically based on segment dimensions"}),"\n",(0,r.jsx)(n.li,{children:"Generated components (vehicles, pedestrians, etc.) are managed automatically based on segment type"}),"\n",(0,r.jsx)(n.li,{children:"The component uses a custom 'below-box' geometry for proper ground alignment"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"known-limitations",children:"Known Limitations"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Surface textures and other cloned models must already be present via asset loader, this component does not preload textures or models and assumes they are already available as ",(0,r.jsx)(n.code,{children:"mixin"}),"s in the scene"]}),"\n",(0,r.jsx)(n.li,{children:"Elevation levels are limited to the range of -1 to 2"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}}}]);