(self.webpackChunk_3dstreet_docs=self.webpackChunk_3dstreet_docs||[]).push([[4238],{358:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=i.p+"assets/images/mission-bay-traffic-circle-rev4-298a0ace3bdfeb768fe7c0d4535b4a0e.jpg"},1578:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=i.p+"assets/images/mission-bay-es-traffic-circle-hand-drawings-1fcdf5d5c87d8d28c324de1b1e8944a6.jpeg"},1706:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=i.p+"assets/images/mission-bay-es-nearby-intersection-large-roads-4b445b9094703687b9354970549c72ce.jpg"},1870:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=i.p+"assets/images/mission-bay-es-empty-site-03bc0f97c4b0e92642f35bcb6a03dc23.jpg"},3103:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=i.p+"assets/images/mission-bay-traffic-circle-rev4-298a0ace3bdfeb768fe7c0d4535b4a0e.jpg"},4491:(e,t,i)=>{"use strict";i.d(t,{A:()=>o});const o=i.p+"assets/images/kfarr-f8acf80bb4d2c0c987ed0949839bfe16.jpeg"},8292:(e,t,i)=>{"use strict";i.r(t),i.d(t,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>o,toc:()=>c});var o=i(8756),s=i(4848),n=i(8453),r=i(1960);i(8895);const a={title:"Community-Led Design of Safe \u201cSchool Streets\u201d for Mission Bay Elementary School",description:"In San Francisco's Mission Bay neighborhood, community leaders used 3DStreet's rapid prototyping service to create a 3D digital twin of proposed street safety improvements around a new elementary school, helping them effectively advocate for the project with city officials and stakeholders.",authors:["kfarr"],tags:["safe streets","school streets","intersection","community-led planning"],image:"./images/2024-05-24/mission-bay-traffic-circle-rev4.jpg"},l=void 0,d={image:i(3103).A,authorsImageUrls:[i(4491).A]},c=[{value:"New Neighborhood, No School",id:"new-neighborhood-no-school",level:2},{value:"New Neighborhood, Old School Transportation",id:"new-neighborhood-old-school-transportation",level:2},{value:"Community Groups Envision a Better Future Change",id:"community-groups-envision-a-better-future-change",level:2},{value:"From Idea to Prototype with 3DStreet Rapid Prototyping Service",id:"from-idea-to-prototype-with-3dstreet-rapid-prototyping-service",level:2},{value:"Adding Context with Real World Elements",id:"adding-context-with-real-world-elements",level:2},{value:"Is it Feasible? From 3D Prototypes to Civil Drawings",id:"is-it-feasible-from-3d-prototypes-to-civil-drawings",level:2},{value:"Make Your Next Community-Led Project a Success",id:"make-your-next-community-led-project-a-success",level:2},{value:"References",id:"references",level:3}];function h(e){const t={a:"a",h2:"h2",h3:"h3",img:"img",p:"p",...(0,n.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.p,{children:"In San Francisco's Mission Bay neighborhood, community leaders used 3DStreet's rapid prototyping service to create a 3D digital twin of proposed street safety improvements around a new elementary school, helping them effectively advocate for the project with city officials and stakeholders."}),"\n",(0,s.jsxs)("img-comparison-slider",{children:[(0,s.jsx)("img",{slot:"first",width:"100%",src:"https://cdn.glitch.global/185d7b67-1046-4065-8ddc-d1850cd3d096/mission-bay-1.jpg?v=1711755971050"}),(0,s.jsx)("img",{slot:"second",width:"100%",src:"https://cdn.glitch.global/185d7b67-1046-4065-8ddc-d1850cd3d096/mission-bay-2.jpg?v=1711755969977"})]}),"\n",(0,s.jsx)(t.h2,{id:"new-neighborhood-no-school",children:"New Neighborhood, No School"}),"\n",(0,s.jsx)(t.p,{children:"San Francisco\u2019s Mission Bay neighborhood is one of the fastest growing areas in the City. From 2010-2020, it doubled its population by hosting many of SF\u2019s new residential building projects. [1] [2] Mission Bay is also host to well-known firms like OpenAI, Uber, and UCSF, not to mention world-class entertainment facilities like the newly built Chase Center, home of the Golden State Warriors."}),"\n",(0,s.jsx)(t.p,{children:"But there\u2019s one glaring omission in Mission Bay \u2013 there are no schools. \u201cThere currently are no elementary, middle, or high schools, public or private, in the Mission Bay area,\u201d said Matt Haney in 2017, then President of the Board for SF public schools. \u201cThis is unacceptable. This is a community that urgently deserves and needs a school.\u201d [3]"}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:i(1870).A+"",width:"1268",height:"667"}),(0,s.jsx)("br",{}),(0,s.jsx)("i",{children:"\nThe future site for an elementary school building in Mission Bay, San Francisco is currently a parking lot sitting on top of rocky fill covering what was once part of an actual bay and tidal wetlands. [4]"})]}),"\n",(0,s.jsx)(t.p,{children:"25 years after being proposed in a 1998 Mission Bay redevelopment plan, construction on a school in the neighborhood has finally begun! The $90 million Mission Bay Elementary School project is expected to be completed in time to open for the school year starting August 2025. [5]"}),"\n",(0,s.jsx)(t.h2,{id:"new-neighborhood-old-school-transportation",children:"New Neighborhood, Old School Transportation"}),"\n",(0,s.jsx)(t.p,{children:"Despite its recent development, Mission Bay was designed with no protected active transportation facilities aside from bayside trails. Many of its streets consist of 3 lanes dedicated to motor vehicles in each direction (2 travel, 1 parking) with no separated bike lanes, few painted ones, and copious sharrows. While effective in accommodating egress vehicle traffic after Warriors and Giants games, existing street space does not promote active mobility for neighborhood residents and school children."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:i(1706).A+"",width:"1260",height:"677"}),(0,s.jsx)("br",{}),"\n",(0,s.jsx)("i",{children:"Owens Street meets Nelson Rising Lanes in Mission Bay, San Francisco. The parcel northeast of the intersection (currently occupied by a parking lot) is the future site of the proposed SFUSD Mission Bay Elementary School."})]}),"\n",(0,s.jsx)(t.p,{children:"Local community members are excited about the prospect of improving street conditions to encourage active walking, biking and mobility for students living in the neighborhood."}),"\n",(0,s.jsx)(t.p,{children:"\u201cMission Bay is a densely populated, flat neighborhood, so it just makes sense to provide active mobility options for students going to school. But we are faced with a built environment that prioritizes the car and makes walking and cycling a scary proposition for parents,\u201d said Peter Belden, a community activist and San Francisco\u2019s 2024 Bike Champion of the Year."}),"\n",(0,s.jsx)(t.h2,{id:"community-groups-envision-a-better-future-change",children:"Community Groups Envision a Better Future Change"}),"\n",(0,s.jsx)(t.p,{children:"However, community leaders were disappointed with the limited resources dedicated to improving street safety ahead of construction of the new school. While the City committed to fund a study [6] to identify problem areas and suggest possible designs for a few trouble spots, it fell short of community expectations by not delivering a comprehensive, neighborhood-wide plan for safe walking and biking access to the school."}),"\n",(0,s.jsx)(t.p,{children:"The community took it upon themselves to create their own designs. \u201cWe started by rethinking the traffic circle neighboring the new school and originally designed to accommodate peak vehicle flows after ball games. With a school going in next door, we wanted to re-imagine it as best-in-class infrastructure that separates modes, providing a safety buffer for vulnerable road users while allowing residents to access nature and planned affordable housing without the need for a car,\u201d explained Nik Kaestner, the former Director of Sustainability at SFUSD."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:i(1578).A+"",width:"1024",height:"799"}),(0,s.jsx)("br",{}),"\nA hand-drawn sketch by Nik Kaestner to illustrate core concepts of a proposed project to add separated cycling facilities to an existing traffic circle at the intersection of Mission Bay Drive and Owens St."]}),"\n",(0,s.jsx)(t.h2,{id:"from-idea-to-prototype-with-3dstreet-rapid-prototyping-service",children:"From Idea to Prototype with 3DStreet Rapid Prototyping Service"}),"\n",(0,s.jsx)(t.p,{children:"\u201cWe were inspired by \u2018Dutch-style\u2019 roundabouts [7] with full separation continuing through the intersection, not only along approaching streets,\u201d continued Kaestner. \u201cBut we were limited in our ability to convert our vision from hand-drawn sketches into a practical prototype that would excite fellow advocates and be taken seriously by City staff.\u201d"}),"\n",(0,s.jsx)(r.Ay,{streamType:"on-demand",playbackId:"wH4aMaxcBzafPSFA5a9n02YPLKy2GLzAD",primaryColor:"#FFFFFF",secondaryColor:"#000000",accentColor:"#653CB0",autoplay:"muted",loop:!0}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("i",{children:"Animation generated by 3DStreet showing the evolution from existing conditions of a mixed-mode traffic circle to a mode-separated traffic circle."}),"\n",(0,s.jsx)(t.p,{children:"Community leaders turned to 3DStreet for help in converting the sketch into a 3D prototype that can be used  in advocacy and planning conversations with City staff and elected officials."}),"\n",(0,s.jsx)(t.p,{children:"This simplified \u201cdigital twin\u201d encompasses a virtual representation of both the existing conditions and proposed future changes. Hosting on 3DStreet Cloud allowed the team to create visuals for specific use-cases on demand and share these with others to further remix."}),"\n",(0,s.jsx)(t.h2,{id:"adding-context-with-real-world-elements",children:"Adding Context with Real World Elements"}),"\n",(0,s.jsx)(t.p,{children:"To provide visual context for stakeholders reviewing proposed changes, community leaders added real-world surface scan maps and a 3D model of the proposed elementary school using 3DStreet\u2019s Geospatial Pro features."}),"\n",(0,s.jsxs)(t.p,{children:[(0,s.jsx)(t.img,{src:i(358).A+"",width:"1080",height:"611"}),(0,s.jsx)("br",{}),"\n",(0,s.jsx)("i",{children:"Adding the Mapbox satellite map ground layer along with a low fidelity 3D model of the school building helped ground the visualization in the present-day context."})]}),"\n",(0,s.jsx)(t.p,{children:"Leveraging multiple camera perspectives, especially simulating a first-person view, was especially helpful to share critical design attributes with stakeholders."}),"\n",(0,s.jsx)(t.p,{children:"\u201cAs our neighborhood develops a vision for how we will welcome the Mission Bay school, this tool is a great gift to outreach and engagement with both elected officials and agency staff. The multi-viewpoint visualization, especially the first-person animation of traffic circle usage at a child\u2019s height and the before/after slider bar feature clearly convey what is possible.\u201d said Sarah Bertram, a local community member advocating on behalf of neighboring residents."}),"\n",(0,s.jsx)(r.Ay,{streamType:"on-demand",playbackId:"GJ8AFx2PIwn9y5f2B016EVKXYkzmj6lxT",primaryColor:"#FFFFFF",secondaryColor:"#000000",accentColor:"#653CB0",autoplay:"muted",loop:!0}),"\n",(0,s.jsx)("br",{}),"\n",(0,s.jsx)("i",{children:"Animation generated by 3DStreet showing the first-person animation of traffic circle usage at a child's height."}),"\n",(0,s.jsx)(t.h2,{id:"is-it-feasible-from-3d-prototypes-to-civil-drawings",children:"Is it Feasible? From 3D Prototypes to Civil Drawings"}),"\n",(0,s.jsx)(t.p,{children:"This project is just starting. The school has broken ground with more than a year of construction remaining. While the prototypes of safer school streets are winning people\u2019s hearts, the constraints of budget and technical feasibility are the next issues to tackle for community and City stakeholders."}),"\n",(0,s.jsx)(t.p,{children:"Fortunately, 3DStreet gives stakeholders a head start as they consider more detailed civil plans. \u201c3DStreet\u2019s ability to export to other popular file formats allowed us to jumpstart the manual process of preparing baseline conditions so that our valuable engineer time can be better spent on project-specific requirements,\u201d said Jorge Romero-Lozano, a civil engineer and executive director of GreeningProjects.org, who also consulted on the project."}),"\n",(0,s.jsx)(t.h2,{id:"make-your-next-community-led-project-a-success",children:"Make Your Next Community-Led Project a Success"}),"\n",(0,s.jsxs)(t.p,{children:["Let us help you with your next community-led improvement project. Our team is available to provide assistance as you navigate the community-led development process, from ideation to prototyping, stakeholder communication, and community outreach empowered by next generation technology. ",(0,s.jsx)(t.a,{href:"/docs/services/",children:"Learn more about our Rapid Prototype Service to quickly move your project to the next stage."})]}),"\n",(0,s.jsx)(t.h3,{id:"references",children:"References"}),"\n",(0,s.jsxs)(t.p,{children:["[1] ",(0,s.jsx)(t.a,{href:"https://www.potreroview.net/mission-bays-population-almost-doubled-in-last-decade/",children:"https://www.potreroview.net/mission-bays-population-almost-doubled-in-last-decade/"})]}),"\n",(0,s.jsxs)(t.p,{children:["[2] ",(0,s.jsx)(t.a,{href:"https://www.sf.gov/news/city-celebrates-opening-and-dedication-affordable-housing-mission-bay",children:"https://www.sf.gov/news/city-celebrates-opening-and-dedication-affordable-housing-mission-bay"})]}),"\n",(0,s.jsxs)(t.p,{children:["[3] ",(0,s.jsx)(t.a,{href:"https://www.potreroview.net/new-mission-bay-public-school-to-be-launched-within-five-years/",children:"https://www.potreroview.net/new-mission-bay-public-school-to-be-launched-within-five-years/"})]}),"\n",(0,s.jsxs)(t.p,{children:["[4] ",(0,s.jsx)(t.a,{href:"https://www.foundsf.org/index.php?title=Filling_The_Bay_Along_San_Francisco%E2%80%99s_Southern_Waterfront",children:"https://www.foundsf.org/index.php?title=Filling_The_Bay_Along_San_Francisco%E2%80%99s_Southern_Waterfront"})]}),"\n",(0,s.jsxs)(t.p,{children:["[4] ",(0,s.jsx)(t.a,{href:"https://www.sfusd.edu/about-sfusd/sfusd-news/press-releases/2022-10-27-construction-set-begin-new-sfusd-school-mission-bay",children:"https://www.sfusd.edu/about-sfusd/sfusd-news/press-releases/2022-10-27-construction-set-begin-new-sfusd-school-mission-bay"})]}),"\n",(0,s.jsxs)(t.p,{children:["[5] ",(0,s.jsx)(t.a,{href:"https://sfyimby.com/2023/02/sitework-underway-for-mission-bay-school-in-san-francisco.html",children:"https://sfyimby.com/2023/02/sitework-underway-for-mission-bay-school-in-san-francisco.html"})]}),"\n",(0,s.jsxs)(t.p,{children:["[6] ",(0,s.jsx)(t.a,{href:"https://www.sfcta.org/mission-bay-school",children:"https://www.sfcta.org/mission-bay-school"})," Plan provided by the SFCTA, a SF County agency which is separate from the SF Municipal Transportation Agency. ",(0,s.jsx)(t.a,{href:"https://en.wikipedia.org/wiki/San_Francisco_County_Transportation_Authority",children:"https://en.wikipedia.org/wiki/San_Francisco_County_Transportation_Authority"})]}),"\n",(0,s.jsxs)(t.p,{children:["[7] ",(0,s.jsx)(t.a,{href:"https://bicycledutch.wordpress.com/2015/10/13/explaining-the-dutch-roundabout-abroad/",children:"https://bicycledutch.wordpress.com/2015/10/13/explaining-the-dutch-roundabout-abroad/"})]})]})}function u(e={}){const{wrapper:t}={...(0,n.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(h,{...e})}):h(e)}},8453:(e,t,i)=>{"use strict";i.d(t,{R:()=>r,x:()=>a});var o=i(6540);const s={},n=o.createContext(s);function r(e){const t=o.useContext(n);return o.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:r(e.components),o.createElement(n.Provider,{value:t},e.children)}},8756:e=>{"use strict";e.exports=JSON.parse('{"permalink":"/blog/2024/05/24/community-led-design-of-safe-school-streets-for-mission-bay-elementary-school","source":"@site/blog/2024-05-24-community-led-design-of-safe-school-streets-for-mission-bay-elementary-school.mdx","title":"Community-Led Design of Safe \u201cSchool Streets\u201d for Mission Bay Elementary School","description":"In San Francisco\'s Mission Bay neighborhood, community leaders used 3DStreet\'s rapid prototyping service to create a 3D digital twin of proposed street safety improvements around a new elementary school, helping them effectively advocate for the project with city officials and stakeholders.","date":"2024-05-24T00:00:00.000Z","tags":[{"inline":true,"label":"safe streets","permalink":"/blog/tags/safe-streets"},{"inline":true,"label":"school streets","permalink":"/blog/tags/school-streets"},{"inline":true,"label":"intersection","permalink":"/blog/tags/intersection"},{"inline":true,"label":"community-led planning","permalink":"/blog/tags/community-led-planning"}],"readingTime":6.155,"hasTruncateMarker":true,"authors":[{"name":"Kieran Farr","title":"Creator of 3DStreet","url":"https://github.com/kfarr","imageURL":"./images/authors/kfarr.jpeg","key":"kfarr","page":null}],"frontMatter":{"title":"Community-Led Design of Safe \u201cSchool Streets\u201d for Mission Bay Elementary School","description":"In San Francisco\'s Mission Bay neighborhood, community leaders used 3DStreet\'s rapid prototyping service to create a 3D digital twin of proposed street safety improvements around a new elementary school, helping them effectively advocate for the project with city officials and stakeholders.","authors":["kfarr"],"tags":["safe streets","school streets","intersection","community-led planning"],"image":"./images/2024-05-24/mission-bay-traffic-circle-rev4.jpg"},"unlisted":false,"prevItem":{"title":"Announcing 3DStreet Geospatial Pro Early Access","permalink":"/blog/2024/06/14/announcing-3dstreet-geospatial-pro"},"nextItem":{"title":"Community-led planning trends presented at the Caltrans Equity Advisory Committee","permalink":"/blog/2024/04/22/community-led-planning-trends-at-caltrans-equity-advisory-committee"}}')},8895:function(e,t,i){"use strict";var o=this&&this.__createBinding||(Object.create?function(e,t,i,o){void 0===o&&(o=i),Object.defineProperty(e,o,{enumerable:!0,get:function(){return t[i]}})}:function(e,t,i,o){void 0===o&&(o=i),e[o]=t[i]}),s=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),n=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&o(t,e,i);return s(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.ImgComparisonSlider=void 0;const r=i(6540);"undefined"!=typeof document&&Promise.resolve().then((()=>n(i(9749)))),t.ImgComparisonSlider=(0,r.forwardRef)((({children:e,onSlide:t,value:i,className:o,...s},n)=>{const a=(0,r.useRef)();return(0,r.useEffect)((()=>{void 0!==i&&(a.current.value=parseFloat(i.toString()))}),[i,a]),(0,r.useEffect)((()=>{t&&a.current.addEventListener("slide",t)}),[]),(0,r.useImperativeHandle)(n,(()=>a.current),[a]),(0,r.createElement)("img-comparison-slider",Object.assign({class:o?`${o} rendered`:"rendered",tabIndex:0,ref:a},s),e)}))},9749:()=>{(()=>{"use strict";var e={792:(e,t,i)=>{i.d(t,{Z:()=>n});var o=i(609),s=i.n(o)()((function(e){return e[1]}));s.push([e.id,':host{--divider-width: 1px;--divider-color: #fff;--divider-shadow: none;--default-handle-width: 50px;--default-handle-color: #fff;--default-handle-opacity: 1;--default-handle-shadow: none;--handle-position-start: 50%;position:relative;display:inline-block;overflow:hidden;line-height:0;direction:ltr}@media screen and (-webkit-min-device-pixel-ratio: 0)and (min-resolution: 0.001dpcm){:host{outline-offset:1px}}:host(:focus){outline:2px solid -webkit-focus-ring-color}::slotted(*){-webkit-user-drag:none;-khtml-user-drag:none;-moz-user-drag:none;-o-user-drag:none;user-drag:none;-webkit-touch-callout:none;-webkit-user-select:none;-khtml-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}.first{position:absolute;left:0;top:0;right:0;line-height:normal;font-size:100%;max-height:100%;height:100%;width:100%;--exposure: 50%;--keyboard-transition-time: 0ms;--default-transition-time: 0ms;--transition-time: var(--default-transition-time)}.first .first-overlay-container{position:relative;clip-path:inset(0 var(--exposure) 0 0);transition:clip-path var(--transition-time);height:100%}.first .first-overlay{overflow:hidden;height:100%}.first.focused{will-change:clip-path}.first.focused .first-overlay-container{will-change:clip-path}.second{position:relative}.handle-container{transform:translateX(50%);position:absolute;top:0;right:var(--exposure);height:100%;transition:right var(--transition-time),bottom var(--transition-time)}.focused .handle-container{will-change:right}.divider{position:absolute;height:100%;width:100%;left:0;top:0;display:flex;align-items:center;justify-content:center;flex-direction:column}.divider:after{content:" ";display:block;height:100%;border-left-width:var(--divider-width);border-left-style:solid;border-left-color:var(--divider-color);box-shadow:var(--divider-shadow)}.handle{position:absolute;top:var(--handle-position-start);pointer-events:none;box-sizing:border-box;margin-left:1px;transform:translate(calc(-50% - 0.5px), -50%);line-height:0}.default-handle{width:var(--default-handle-width);opacity:var(--default-handle-opacity);transition:all 1s;filter:drop-shadow(var(--default-handle-shadow))}.default-handle path{stroke:var(--default-handle-color)}.vertical .first-overlay-container{clip-path:inset(0 0 var(--exposure) 0)}.vertical .handle-container{transform:translateY(50%);height:auto;top:unset;bottom:var(--exposure);width:100%;left:0;flex-direction:row}.vertical .divider:after{height:1px;width:100%;border-top-width:var(--divider-width);border-top-style:solid;border-top-color:var(--divider-color);border-left:0}.vertical .handle{top:auto;left:var(--handle-position-start);transform:translate(calc(-50% - 0.5px), -50%) rotate(90deg)}',""]);const n=s},609:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var i=e(t);return t[2]?"@media ".concat(t[2]," {").concat(i,"}"):i})).join("")},t.i=function(e,i,o){"string"==typeof e&&(e=[[null,e,""]]);var s={};if(o)for(var n=0;n<this.length;n++){var r=this[n][0];null!=r&&(s[r]=!0)}for(var a=0;a<e.length;a++){var l=[].concat(e[a]);o&&s[l[0]]||(i&&(l[2]?l[2]="".concat(i," and ").concat(l[2]):l[2]=i),t.push(l))}},t}}},t={};function i(o){var s=t[o];if(void 0!==s)return s.exports;var n=t[o]={id:o,exports:{}};return e[o](n,n.exports,i),n.exports}i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var o in t)i.o(t,o)&&!i.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=i(792);const t="rendered",o=(e,t)=>{const i=e.getBoundingClientRect();let o,s;return"mousedown"===t.type?(o=t.clientX,s=t.clientY):(o=t.touches[0].clientX,s=t.touches[0].clientY),o>=i.x&&o<=i.x+i.width&&s>=i.y&&s<=i.y+i.height};let s;const n={ArrowLeft:-1,ArrowRight:1},r=["horizontal","vertical"],a=e=>({x:e.touches[0].pageX,y:e.touches[0].pageY}),l=e=>({x:e.pageX,y:e.pageY}),d="undefined"!=typeof window&&(null===window||void 0===window?void 0:window.HTMLElement);"undefined"!=typeof window&&(window.document&&(s=document.createElement("template"),s.innerHTML='<div class="second" id="second"> <slot name="second"><slot name="before"></slot></slot> </div> <div class="first" id="first"> <div class="first-overlay"> <div class="first-overlay-container" id="firstImageContainer"> <slot name="first"><slot name="after"></slot></slot> </div> </div> <div class="handle-container"> <div class="divider"></div> <div class="handle" id="handle"> <slot name="handle"> <svg xmlns="http://www.w3.org/2000/svg" class="default-handle" viewBox="-8 -3 16 6"> <path d="M -5 -2 L -7 0 L -5 2 M 5 -2 L 7 0 L 5 2" fill="none" vector-effect="non-scaling-stroke"/> </svg> </slot> </div> </div> </div> '),window.customElements.define("img-comparison-slider",class extends d{constructor(){super(),this.exposure=this.hasAttribute("value")?parseFloat(this.getAttribute("value")):50,this.slideOnHover=!1,this.slideDirection="horizontal",this.keyboard="enabled",this.isMouseDown=!1,this.animationDirection=0,this.isFocused=!1,this.dragByHandle=!1,this.onMouseMove=e=>{if(this.isMouseDown||this.slideOnHover){const t=l(e);this.slideToPage(t)}},this.bodyUserSelectStyle="",this.bodyWebkitUserSelectStyle="",this.onMouseDown=e=>{if(this.slideOnHover)return;if(this.handle&&!o(this.handleElement,e))return;e.preventDefault(),window.addEventListener("mousemove",this.onMouseMove),window.addEventListener("mouseup",this.onWindowMouseUp),this.isMouseDown=!0,this.enableTransition();const t=l(e);this.slideToPage(t),this.focus(),this.bodyUserSelectStyle=window.document.body.style.userSelect,this.bodyWebkitUserSelectStyle=window.document.body.style.webkitUserSelect,window.document.body.style.userSelect="none",window.document.body.style.webkitUserSelect="none"},this.onWindowMouseUp=()=>{this.isMouseDown=!1,window.document.body.style.userSelect=this.bodyUserSelectStyle,window.document.body.style.webkitUserSelect=this.bodyWebkitUserSelectStyle,window.removeEventListener("mousemove",this.onMouseMove),window.removeEventListener("mouseup",this.onWindowMouseUp)},this.touchStartPoint=null,this.isTouchComparing=!1,this.hasTouchMoved=!1,this.onTouchStart=e=>{this.dragByHandle&&!o(this.handleElement,e)||(this.touchStartPoint=a(e),this.isFocused&&(this.enableTransition(),this.slideToPage(this.touchStartPoint)))},this.onTouchMove=e=>{if(null===this.touchStartPoint)return;const t=a(e);if(this.isTouchComparing)return this.slideToPage(t),e.preventDefault(),!1;if(!this.hasTouchMoved){const i=Math.abs(t.y-this.touchStartPoint.y),o=Math.abs(t.x-this.touchStartPoint.x);if("horizontal"===this.slideDirection&&i<o||"vertical"===this.slideDirection&&i>o)return this.isTouchComparing=!0,this.focus(),this.slideToPage(t),e.preventDefault(),!1;this.hasTouchMoved=!0}},this.onTouchEnd=()=>{this.isTouchComparing=!1,this.hasTouchMoved=!1,this.touchStartPoint=null},this.onBlur=()=>{this.stopSlideAnimation(),this.isFocused=!1,this.firstElement.classList.remove("focused")},this.onFocus=()=>{this.isFocused=!0,this.firstElement.classList.add("focused")},this.onKeyDown=e=>{if("disabled"===this.keyboard)return;const t=n[e.key];this.animationDirection!==t&&void 0!==t&&(this.animationDirection=t,this.startSlideAnimation())},this.onKeyUp=e=>{if("disabled"===this.keyboard)return;const t=n[e.key];void 0!==t&&this.animationDirection===t&&this.stopSlideAnimation()},this.resetDimensions=()=>{this.imageWidth=this.offsetWidth,this.imageHeight=this.offsetHeight};const t=this.attachShadow({mode:"open"}),i=document.createElement("style");i.innerHTML=e.Z,this.getAttribute("nonce")&&i.setAttribute("nonce",this.getAttribute("nonce")),t.appendChild(i),t.appendChild(s.content.cloneNode(!0)),this.firstElement=t.getElementById("first"),this.handleElement=t.getElementById("handle")}set handle(e){this.dragByHandle="false"!==e.toString().toLowerCase()}get handle(){return this.dragByHandle}get value(){return this.exposure}set value(e){const t=parseFloat(e);t!==this.exposure&&(this.exposure=t,this.enableTransition(),this.setExposure())}get hover(){return this.slideOnHover}set hover(e){this.slideOnHover="false"!==e.toString().toLowerCase(),this.removeEventListener("mousemove",this.onMouseMove),this.slideOnHover&&this.addEventListener("mousemove",this.onMouseMove)}get direction(){return this.slideDirection}set direction(e){this.slideDirection=e.toString().toLowerCase(),this.slide(0),this.firstElement.classList.remove(...r),r.includes(this.slideDirection)&&this.firstElement.classList.add(this.slideDirection)}static get observedAttributes(){return["hover","direction"]}connectedCallback(){this.hasAttribute("tabindex")||(this.tabIndex=0),this.addEventListener("dragstart",(e=>(e.preventDefault(),!1))),new ResizeObserver(this.resetDimensions).observe(this),this.setExposure(0),this.keyboard=this.hasAttribute("keyboard")&&"disabled"===this.getAttribute("keyboard")?"disabled":"enabled",this.addEventListener("keydown",this.onKeyDown),this.addEventListener("keyup",this.onKeyUp),this.addEventListener("focus",this.onFocus),this.addEventListener("blur",this.onBlur),this.addEventListener("touchstart",this.onTouchStart,{passive:!0}),this.addEventListener("touchmove",this.onTouchMove,{passive:!1}),this.addEventListener("touchend",this.onTouchEnd),this.addEventListener("mousedown",this.onMouseDown),this.handle=this.hasAttribute("handle")?this.getAttribute("handle"):this.dragByHandle,this.hover=this.hasAttribute("hover")?this.getAttribute("hover"):this.slideOnHover,this.direction=this.hasAttribute("direction")?this.getAttribute("direction"):this.slideDirection,this.resetDimensions(),this.classList.contains(t)||this.classList.add(t)}disconnectedCallback(){this.transitionTimer&&window.clearTimeout(this.transitionTimer)}attributeChangedCallback(e,t,i){"hover"===e&&(this.hover=i),"direction"===e&&(this.direction=i),"keyboard"===e&&(this.keyboard="disabled"===i?"disabled":"enabled")}setExposure(e=0){var t;this.exposure=(t=this.exposure+e)<0?0:t>100?100:t,this.firstElement.style.setProperty("--exposure",100-this.exposure+"%")}slide(e=0){this.setExposure(e);const t=new Event("slide");this.dispatchEvent(t)}slideToPage(e){"horizontal"===this.slideDirection&&this.slideToPageX(e.x),"vertical"===this.slideDirection&&this.slideToPageY(e.y)}slideToPageX(e){const t=e-this.getBoundingClientRect().left-window.scrollX;this.exposure=t/this.imageWidth*100,this.slide(0)}slideToPageY(e){const t=e-this.getBoundingClientRect().top-window.scrollY;this.exposure=t/this.imageHeight*100,this.slide(0)}enableTransition(){this.firstElement.style.setProperty("--transition-time","100ms"),this.transitionTimer=window.setTimeout((()=>{this.firstElement.style.setProperty("--transition-time","var(--default-transition-time)"),this.transitionTimer=null}),100)}startSlideAnimation(){let e=null,t=this.animationDirection;this.firstElement.style.setProperty("--transition-time","var(--keyboard-transition-time)");const i=o=>{if(0===this.animationDirection||t!==this.animationDirection)return;null===e&&(e=o);const s=(o-e)/16.666666666666668*this.animationDirection;this.slide(s),setTimeout((()=>window.requestAnimationFrame(i)),0),e=o};window.requestAnimationFrame(i)}stopSlideAnimation(){this.animationDirection=0,this.firstElement.style.setProperty("--transition-time","var(--default-transition-time)")}}))})()})()}}]);